<h1 id="introduction">Introduction</h1>
<p>This extension allows you to create a custom layout using simplified s-expressions. It allows the user to enter the layout description using dmenu and creates the corresponding dynamic layout.</p>
<p>I have to admit that I almost never needed this functionality. <em>Tiling</em> and <em>monocle</em> layouts were always enough for me. But I kind of wanted this functionality to be available nonetheless, so I decided to try implementing it for fun. Hopefully someone may find it useful.</p>
<p>The syntax is basically s-expressions with outermost parentheses removed for convenience.</p>
<p>I tried to keep the code simple in the spirit of DWM, but in the end I decided to keep it as a separate file just so it is easier to modify, test and distribute.</p>
<h1 id="current-state">Current state</h1>
<p>It works. More tesing is needed and I still have a few items in my TODO. In particular, it does not take window margin setting into account.</p>
<p>TODO:</p>
<ul>
<li>Support for windows margin/borders.</li>
<li>Floating configuration for the containers (h, v, m). Currently the floating mode only works for <strong>c</strong> element.</li>
<li>Empty container to hide the leftover windows.</li>
<li>Provide a reasonable default for sxp layout.</li>
<li>Perhaps, some syntax improvements, e.g. replace <code>(nth ...)</code> with something quicker.</li>
</ul>
<h1 id="examples">Examples</h1>
<p>See screencasts at the end of the README for some live examples. Here are some text examples.</p>
<p><code>h c (v ...)</code> Simple tile layout.</p>
<p><code>m ...</code><br />
Monocle.</p>
<p><code>h (c w: 1.5) (v c (m ...))</code><br />
Tiling layout with weighted main viewport (1.5 times the neighbours). The stack area is limited with two clients. The leftover windows will occupy the right bottom frame.</p>
<p><code>h (v w: 1.2 (c w: 1.2) 1) (v ...)</code><br />
Two windows in the master area. The master column is 1.2 times width the stack column and the first window is 1.2 times the height of the second one.</p>
<p><code>v ...</code><br />
All clients arranged in a single column.</p>
<p><code>h c (v (max 3) (m ...))</code><br />
One master + four slots in the stack area. Every other window will be stacked in the last frame.</p>
<p><code>h (nth 1) (nth 0)</code><br />
Display first two clients from the list, the first after the second. WARNING: In this setup the other clients will be left untouched from the</p>
<h1 id="syntax">Syntax</h1>
<h2 id="containers">Containers</h2>
<p><strong>(h …)</strong><br />
Horizontal spread. The nodes are distributed horizontally, according to the weight of each one.</p>
<p><strong>(hr …)</strong> Reversed horizontal layout (clients are filled from right to left).</p>
<p><strong>(v …)</strong><br />
Vertical spread. The nodes are distributed vertically, according to the weight of each one.</p>
<p><strong>(vr …)</strong> Reversed vertical layout. Clients are filled from bottom to top.</p>
<p><strong>(m …)</strong><br />
“Monocle”. All clients share the same geometry.</p>
<h2 id="elements">Elements</h2>
<p><strong>c</strong><br />
A slot for a single client.</p>
<p><strong>(nth <code>&lt;number&gt;</code>)</strong><br />
Pick a client from the client stack by the number. <code>(nth 0)</code> represents the first client, <code>(nth 1)</code> - the second etc.</p>
<p><strong>(max <code>&lt;number&gt;</code>)</strong><br />
Provides a space for at most <code>&lt;number&gt;</code> clients in a container.</p>
<p><strong>…</strong><br />
The rest of the clients from the client stack.</p>
<h2 id="node-parameters">Node parameters</h2>
<p><strong>w: <code>&lt;number&gt;</code></strong><br />
Weight. Affects the amount of space the node takes relative to its neighbours.</p>
<p><strong>f: <code>&lt;x&gt; &lt;y&gt; &lt;width&gt; &lt;height&gt;</code></strong><br />
Custom geometry, a.k.a. floating viewport. Can be a part of any container. Does not take the container’s space.</p>
<h1 id="installation-and-configuration">Installation and configuration</h1>
<p>The patch is coming soon. For now the installation is manual, but should not be too difficult anyway.</p>
<h2 id="copy-the-s_layout.c-file-into-the-dwm-folder.">1. Copy the s_layout.c file into the DWM folder.</h2>
<h2 id="include-it-from-dwm.c-before-including-config.h">2. Include it from dwm.c before including <em>config.h</em></h2>
<pre><code>...
static Drw *drw;
static Monitor *mons, *selmon;
static Window root, wmcheckwin;
static int restart = 0;

/*=== s_layout ===*/
include &quot;s_layout.c&quot;

/* configuration, allows nested code to access above variables */
include &quot;config.h&quot;
...</code></pre>
<h2 id="add-the-layout-to-the-layout-list-in-your-config.h">3. Add the layout to the layout list in your config.h:</h2>
<pre><code>static const Layout layouts[] = {
   /* symbol     arrange function */
   { &quot;[]=&quot;,      tile },    /* first entry is default */
   { &quot;[M]&quot;,      monocle },
   { &quot;&gt;&lt;&gt;&quot;,      NULL },    /* no layout function means floating behavior */
   { &quot;HHH&quot;,      grid },
   { &quot;TTT&quot;,      bstack },

   { &quot;SXP&quot;,      s_layout }, /* sxp_layout */
};</code></pre>
<h2 id="add-hotkeys-for-setlayout-and-set_s_layout-functions-set_s_layout-will-open-dmenu-so-you-can-type-the-layout-in-whereas-setlayout-will-just-switch-you-to-the-existing-sxp-layout">4. Add hotkeys for setlayout and set_s_layout functions (set_s_layout will open dmenu so you can type the layout in, whereas setlayout will just switch you to the existing sxp layout):</h2>
<pre><code>   ...
   { MODKEY,                       XK_t,      setlayout,      {.v = &amp;layouts[0]} },
   { MODKEY,                       XK_m,      setlayout,      {.v = &amp;layouts[1]} },
   { MODKEY,                       XK_f,      setlayout,      {.v = &amp;layouts[2]} },
   { MODKEY,                       XK_g,      setlayout,      {.v = &amp;layouts[3]} },
   { MODKEY,                       XK_u,      setlayout,      {.v = &amp;layouts[4]} },

   { MODKEY,                       XK_s,      setlayout,      {.v = &amp;layouts[5]}},
   { MODKEY|ShiftMask,             XK_s,      set_s_layout,   {.v = &amp;layouts[5]}},
   ...</code></pre>
<h1 id="screencast-1">Screencast 1</h1>
<p>Playing around with simple layouts.</p>
<p><img src="Screencast-1.gif" /></p>
<h1 id="screencast-2">Screencast 2</h1>
<p>Creating a floating viewport.</p>
<p><img src="Screencast-2.gif" /></p>
